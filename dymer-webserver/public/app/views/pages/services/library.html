<!-- AC Reload Libraries START -->
<div class="row">
	<div class="col-md-12">
		<button class="btn btn-outline-danger text-right float-right" ng-click="openModal()">Reload Libraries</button>
	</div>
</div>

<!-- Modale di conferma -->
<div class="modal fade" id="confirmationModal" tabindex="-1" role="dialog" aria-labelledby="confirmationModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="confirmationModalLabel">Reload Libraries</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                Are you sure you want to reload the libraries?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" ng-click="confirmReload()">Yes</button>
                <button type="button" class="btn btn-secondary" ng-click="DismissReload()">No</button>
            </div>
        </div>
    </div>
</div>
<!-- AC Reload Libraries END -->
<div class="row" ng-repeat="config in libraryCardsConfigs">
	<div class="col-md-12">
		<div class="card">
			<div class="card-header">
				<h4 class="card-title" ng-click="config.showConfig = !config.showConfig">{{config.title}}
					<span class="pull-right">
                        <i class="fa fa-bars burgherAction" aria-hidden="true"></i>
                    </span>
				</h4>
			</div>
			<div class="card-body" ng-show="config.showConfig" style="overflow-y: hidden;">
				<h5>Seleziona i file da attivare:</h5>
				<table class="table table-hover table-sm dataTable no-footer custom-table" id="{{config.tableId}}">
					<caption></caption>
					<thead class="text-primary">
					<tr role="row">
						<th class="text-center"
						    ng-repeat="column in config.columns"
						    aria-controls="{{config.tableId}}"
						>{{column}}
						</th>
						<th class="text-center" aria-controls="{{config.tableId}}">Activated</th>
					</tr>
					</thead>
					<tbody id="{{config.tableBodyId}}">
					<!-- The table body is dynamically generated by libraryCtrl.js -->
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>

<div class="row">
	<div class="col-md-12">
		<div class="card">
			<div class="card-header">
				<h4 class="card-title" ng-click="showNewLibrary = ! showNewLibrary">Add Libraries
					<span class="pull-right"> <i class="fa fa-cogs burgherAction" aria-hidden="true"></i> </span></h4>
			</div>
			<div class="card-body" ng-show="showNewLibrary">
				<h5>Library</h5>
				<form name="formNewLibrary" id="formNewLibrary">
					<div class="form-group">
						<label for="name">Name:<span>*</span></label>
						<input type="text"
						       class="form-control"
						       id="name"
						       ng-model="library.name"
						       ng-focus="nameFocused = true"
						       required
						>
					</div>
					<div class="form-group">
						<label for="libraryType">Library Type:<span>*</span></label>
						<select id="libraryType"
						        ng-model="selectedLibraryType"
						        class="form-control"
						        ng-show="nameFocused && library.name"
						        ng-change="showLibraryForm()"
						>
							<option value="">Select Library Type</option>
							<option value="Javascript">Javascript</option>
							<option value="CSS">CSS</option>
						</select>
					</div>
					<div ng-show="selectedLibraryType">
						<div class="form-group row">
							<div class="col-md-6">
								<label for="domtype">DOM Type:<span>*</span></label>
								<select class="form-control" id="domtype" ng-model="library.domtype" required>
									<option value="link">Link</option>
									<option value="script">Script</option>
								</select>
							</div>
							<div class="col-md-6">
								<input type="checkbox"
								       class="form-check-input"
								       id="useonload"
								       ng-model="library.useonload"
								>
								<label for="useonload">Use Onload <span>(change only if necessary)</span></label>
							</div>
						</div>
						<!-- <div class="form-group">
							<label for="filename">Path:<span>*</span></label>
							<input type="text" class="form-control" id="filename" ng-model="library.filename" required placeholder="Example: css/lib/library.css">
						</div> -->
						<div class="form-group">
							<label>Upload Library:<span>*</span></label>
							<input type="file"
							       class="form-control-file"
							       id="filename"
							       file-model="fileUpload"
							       ng-model="library.filename"
							       required
							>
						</div>
						<div class="form-group">
							<label for="callback">Callback:</label>
							<textarea type="text"
							          class="form-control"
							          id="callback"
							          ng-model="library.callback"
							></textarea>
						</div>
						<div class="form-group">
							<label for="group">Group:<span>*</span></label>
							<input type="text" class="form-control" id="group" ng-model="library.group" required>
						</div>
						<div class="form-group row">
							<div class="col-md-6">
								<label for="loadtype">Load Type:<span>*</span></label>
								<select class="form-control" id="loadtype" ng-model="library.loadtype" required>
									<option value="">Select Load Type</option>
									<option value="view">View</option>
									<option value="map">Map</option>
									<option value="form">Form</option>
								</select>
							</div>
							<div class="col-md-6">
								<input type="checkbox"
								       class="form-check-input"
								       id="mandatory"
								       ng-model="library.mandatory"
								>
								<label for="mandatory">Mandatory:</label>
							</div>
						</div>
						<div class="row text-right">
							<div class="col-12">
								<button type="button" class="btn btn-info" ng-click="addLibrary()">Save</button>
								<button type="button"
								        class="btn btn-danger"
								        ng-click="cancelAddLibrary()"
								>Cancel
								</button>
							</div>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</div>
